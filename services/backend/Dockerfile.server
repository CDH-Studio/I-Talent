FROM node:12-alpine

ENV TZ=America/Toronto
ENV NODE_ENV=production

RUN mkdir /upskill-backend
WORKDIR /upskill-backend
COPY . .

RUN chown -Rh $user:$user /project

USER $user

RUN yarn install
RUN yarn cache clean
RUN yarn generate

CMD ["yarn", "deploy"]
